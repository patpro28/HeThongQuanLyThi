

@model HeThongQuanLyThi.Models.ContestManageProblemsVm
@{
    var contest = (HeThongQuanLyThi.Models.Contest)ViewBag.Contest;
    ViewData["Title"] = "Quản lý câu hỏi";
}
<h1 class="text-2xl font-semibold mb-4">Quản lý câu hỏi cho: @contest.Title</h1>
<p class="text-gray-600 mb-4">Môn: @contest.Subject.Name</p>

<form asp-action="ManageProblems" method="post">
  @Html.AntiForgeryToken()
  <input type="hidden" asp-for="ContestId" />

  @if (Model.Items == null || Model.Items.Count == 0)
  {
    <div class="rounded border bg-yellow-50 text-yellow-800 p-3 mb-4">
      Chưa có câu hỏi nào thuộc môn này. Hãy tạo <strong>Problem</strong> trước rồi quay lại đây để chọn.
    </div>
  }
  else
  {
    <div class="overflow-x-auto bg-white rounded border">
      <table class="min-w-full">
        <thead class="bg-gray-50">
          <tr>
            <th class="p-2 text-left">Chọn</th>
            <th class="p-2 text-left">Câu hỏi</th>
            <th class="p-2 text-left">Thứ tự</th>
            <th class="p-2 text-left">Điểm (override)</th>
          </tr>
        </thead>
        <tbody>
        @for (int i = 0; i < Model.Items.Count; i++)
        {
          <tr class="border-t align-top">
            <td class="p-2">
              <input type="hidden" asp-for="Items[i].ProblemId" />
              <input asp-for="Items[i].Selected" type="checkbox" class="rounded" />
            </td>
            <td class="p-2">
              <div class="text-sm">@Model.Items[i].Content</div>
            </td>
            <td class="p-2">
              <input asp-for="Items[i].Order" type="number" class="w-24 rounded border p-1" />
            </td>
            <td class="p-2">
              <input asp-for="Items[i].PointsOverride" type="number" step="0.1" class="w-28 rounded border p-1" />
            </td>
          </tr>
        }
        </tbody>
      </table>
    </div>
  }

  <div class="mt-4 flex gap-2">
    <button class="rounded bg-indigo-600 px-4 py-2 text-white">Lưu</button>
    <a asp-action="Details" asp-route-id="@Model.ContestId" class="rounded border px-4 py-2 hover:bg-gray-50">Quay lại</a>
  </div>
</form>